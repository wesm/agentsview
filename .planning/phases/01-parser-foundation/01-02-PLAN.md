---
phase: 01-parser-foundation
plan: "02"
type: execute
wave: 1
depends_on: []
files_modified:
  - internal/parser/types.go
  - internal/parser/taxonomy.go
autonomous: true
requirements:
  - PRSR-11
  - TAXO-01
  - TAXO-02
must_haves:
  truths:
    - "AgentPi constant exists and compiles as AgentType = \"pi\""
    - "NormalizeToolCategory(\"find\") returns \"Read\""
    - "NormalizeToolCategory(\"grep\") still returns \"Grep\" (no regression)"
  artifacts:
    - path: "internal/parser/types.go"
      provides: "AgentPi constant"
      contains: "AgentPi"
    - path: "internal/parser/taxonomy.go"
      provides: "find -> Read mapping"
      contains: "find"
  key_links:
    - from: "internal/parser/taxonomy.go"
      to: "NormalizeToolCategory"
      via: "case \"find\": return \"Read\""
      pattern: "case \"find\""
---

<objective>
Add the `AgentPi` constant to `internal/parser/types.go` and add the `find` tool mapping to `internal/parser/taxonomy.go`.

Purpose: Establishes the two foundational constants the pi parser (Plan 01-01) will reference. These are one-line additions to existing files that must land first so the parser can compile cleanly.
Output: `AgentPi AgentType = "pi"` in types.go; `case "find": return "Read"` in taxonomy.go.
</objective>

<execution_context>
@/Users/carze/.claude/get-shit-done/workflows/execute-plan.md
@/Users/carze/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Key types and existing constants. Executor needs these to place additions correctly. -->

From internal/parser/types.go (lines 11-18):
```go
const (
    AgentClaude   AgentType = "claude"
    AgentCodex    AgentType = "codex"
    AgentCopilot  AgentType = "copilot"
    AgentGemini   AgentType = "gemini"
    AgentOpenCode AgentType = "opencode"
    AgentCursor   AgentType = "cursor"
    // ADD: AgentPi AgentType = "pi"
)
```

From internal/parser/taxonomy.go (lines 60-76):
```go
// Cursor tools
case "Shell":
    return "Bash"
case "StrReplace":
    return "Edit"
case "LS":
    return "Read"

// ADD Pi section here, before default:
default:
    return "Other"
```

TAXO-02 NOTE: `grep` already maps to "Grep" at line 40 (`case "search_files", "grep": return "Grep"`).
Do NOT add another grep case — it will cause a duplicate case compile error.
Only add `find`.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add AgentPi constant to types.go</name>
  <files>internal/parser/types.go</files>
  <action>
    Add `AgentPi AgentType = "pi"` as the last entry in the `AgentType` const block, after `AgentCursor AgentType = "cursor"`.

    The const block starts at line 11. Insert one line:
    ```go
    AgentPi       AgentType = "pi"
    ```
    after `AgentCursor AgentType = "cursor"`. Align the whitespace with existing entries (tab-separated, value right-aligned at column matching the others).

    No other changes to the file.
  </action>
  <verify>
    <automated>cd /Users/carze/Documents/personal/misc/agentsview && go build ./internal/parser/...</automated>
  </verify>
  <done>File compiles cleanly; `AgentPi` constant is exported and equals the string "pi".</done>
</task>

<task type="auto">
  <name>Task 2: Add find -> Read mapping to taxonomy.go</name>
  <files>internal/parser/taxonomy.go</files>
  <action>
    Add a Pi-specific section to `NormalizeToolCategory` in `internal/parser/taxonomy.go`, placed between the Cursor section and the `default` case.

    Insert:
    ```go
    // Pi tools
    // Note: "grep" is handled above in the Gemini section.
    case "find":
        return "Read"
    ```

    Do NOT add a `grep` case — it already exists at the Gemini section and adding a duplicate will cause a compile error.

    After the edit, the `default: return "Other"` must remain as the final case.
  </action>
  <verify>
    <automated>cd /Users/carze/Documents/personal/misc/agentsview && CGO_ENABLED=1 go test -tags fts5 -run TestNormalize ./internal/parser/... -v</automated>
  </verify>
  <done>
    - `NormalizeToolCategory("find")` returns "Read"
    - `NormalizeToolCategory("grep")` still returns "Grep" (no regression)
    - All taxonomy tests pass
    - File compiles cleanly
  </done>
</task>

</tasks>

<verification>
After both tasks:

```bash
cd /Users/carze/Documents/personal/misc/agentsview && CGO_ENABLED=1 go test -tags fts5 ./internal/parser/... -run "TestNormalize|TestAgentType"
```

Expected: all targeted tests pass, no compile errors.
</verification>

<success_criteria>
- `AgentPi` constant exported from `internal/parser/types.go` with value `"pi"`
- `NormalizeToolCategory("find")` returns `"Read"` (TAXO-01)
- `NormalizeToolCategory("grep")` returns `"Grep"` without change (TAXO-02 confirmed no-op)
- All existing parser tests still pass (`go test ./internal/parser/...`)
</success_criteria>

<output>
After completion, create `.planning/phases/01-parser-foundation/01-02-SUMMARY.md`
</output>
